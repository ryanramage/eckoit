(function(d,e){var a=d.document,c;var b=function(g,t,p){var r=this,o,q,n,s,i,f,h,m="";this.listContainer=a.getElementById(g);this.items=[];this.searched=false;this.filtered=false;this.list=null;this.templateEngines={};this.maxVisibleItemsCount=t.maxVisibleItemsCount||200;q=function(u,w){w.list=w.list||g;w.listClass=w.listClass||"list";w.searchClass=w.searchClass||"search";w.sortClass=w.sortClass||"sort";o=new f(r,w);r.list=c.getByClass(w.listClass,r.listContainer,true);c.addEvent(c.getByClass(w.searchClass,r.listContainer),"keyup",r.search);h=c.getByClass(w.sortClass,r.listContainer);c.addEvent(h,"click",r.sort);if(w.valueNames){var x=n.get(),v=w.valueNames;if(w.indexAsync){n.indexAsync(x,v)}else{n.index(x,v)}}if(u!==e){r.add(u)}};n={get:function(){var w=r.list.childNodes,v=[];for(var x=0,u=w.length;x<u;x++){if(w[x].data===e){v.push(w[x])}}return v},index:function(u,w){for(var x=0,v=u.length;x<v;x++){r.items.push(new i(w,u[x]))}},indexAsync:function(u,v){var w=u.splice(0,100);this.index(w,v);if(u.length>0){setTimeout(function(){n.indexAsync(u,v)},10)}}};this.add=function(v,A){if(A){l(v,A)}var y=[],x=false;if(v[0]===e){v=[v]}for(var w=0,u=v.length;w<u;w++){var z=null;if(v[w] instanceof i){z=v[w];z.reload()}else{x=(r.items.length>r.maxVisibleItemsCount)?true:false;z=new i(v[w],e,x)}if(!x){o.add(z,t)}r.items.push(z);y.push(z)}return y};var l=function(v,x,u){var w=v.splice(0,100);u=u||[];u=u.concat(r.add(w));if(v.length>0){setTimeout(function(){l(v,x,u)},10)}else{x(u)}};this.remove=function(z,y,v){var x=0;for(var w=0,u=r.items.length;w<u;w++){if(r.items[w].values()[z]==y){o.remove(r.items[w],v);r.items.splice(w,1);u--;x++}}return x};this.get=function(z,x){var y=[];for(var v=0,u=r.items.length;v<u;v++){var w=r.items[v];if(w.values()[z]==x){y.push(w)}}if(y.length==0){return null}else{if(y.length==1){return y[0]}else{return y}}};this.sort=function(A,E){var u=r.items.length,D=null,y=A.target||A.srcElement,w="",z=false,C="asc",x="desc",E=E||{};if(y===e){D=A;z=E.asc||false}else{D=c.getAttribute(y,"data-sort");z=c.hasClass(y,C)?false:true}for(var v=0,B=h.length;v<B;v++){c.removeClass(h[v],C);c.removeClass(h[v],x)}if(z){if(y!==e){c.addClass(y,C)}z=true}else{if(y!==e){c.addClass(y,x)}z=false}if(E.sortFunction){E.sortFunction=E.sortFunction}else{E.sortFunction=function(G,F){return s.alphanum(G.values()[D],F.values()[D],z)}}r.items.sort(E.sortFunction);j()};s={alphanum:function(w,v,y){if(w===e||w===null){w=""}if(v===e||v===null){v=""}w=w.toString().replace(/&(lt|gt);/g,function(x,D){return(D=="lt")?"<":">"});w=w.replace(/<\/?[^>]+(>|$)/g,"");v=v.toString().replace(/&(lt|gt);/g,function(x,D){return(D=="lt")?"<":">"});v=v.replace(/<\/?[^>]+(>|$)/g,"");var z=this.chunkify(w);var B=this.chunkify(v);for(var u=0;z[u]&&B[u];u++){if(z[u]!==B[u]){var C=Number(z[u]),A=Number(B[u]);if(y){if(C==z[u]&&A==B[u]){return C-A}else{return(z[u]>B[u])?1:-1}}else{if(C==z[u]&&A==B[u]){return A-C}else{return(z[u]>B[u])?-1:1}}}}return z.length-B.length},chunkify:function(A){var D=[],v=0,C=-1,B=0,z,w;while(z=(w=A.charAt(v++)).charCodeAt(0)){var u=(z==45||z==46||(z>=48&&z<=57));if(u!==B){D[++C]="";B=u}D[C]+=w}return D}};this.search=function(F,w){var v=[],E,D,C,B,z,w=(w===e)?r.items[0].values():w,F=(F===e)?"":F,A=F.target||F.srcElement;F=(A===e)?F.toLowerCase():A.value.toLowerCase();z=r.items;F=F.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");o.clear();if(F===""){k.search();r.searched=false;j()}else{r.searched=true;for(var x=0,u=z.length;x<u;x++){E=false;D=z[x];B=D.values();for(var y in w){if(B.hasOwnProperty(y)&&w[y]!==null){C=B[y].toString().toLowerCase();if((F!=="")&&(C.search(F)>-1)){E=true}}}if(E){D.found=true;v.push(D)}else{D.found=false}}j()}m=F;return v};this.filter=function(z){var y=e;k.filter();if(z===e){r.filtered=false}else{y=[];r.filtered=true;var x=r.items;for(var v=0,u=x.length;v<u;v++){var w=x[v];if(z(w.values())){w.filtered=true;y.push(w)}else{w.filtered=false}}}j();return y};this.size=function(){return r.items.length};this.clear=function(){o.clear();r.items=[]};var k={filter:function(){var v=r.items,u=v.length;while(u--){v[u].filtered=false}},search:function(){var v=r.items,u=v.length;while(u--){v[u].found=false}}};var j=function(){var w=r.items;o.clear();for(var v=0,u=w.length;v<u&&v<r.maxVisibleItemsCount;v++){if((r.filtered&&r.searched&&w[v].found&&w[v].filtered)||(r.filtered&&!r.searched&&w[v].filtered)||(!r.filtered&&r.searched&&w[v].found)||(!r.filtered&&!r.searched)){w[v].show()}}};i=function(v,x,w){var y=this,u={};this.found=false;this.filtered=false;var z=function(B,D,C){if(D===e){if(C){y.values(B,C)}else{y.values(B)}}else{y.elm=D;var A=o.get(y,B);y.values(A)}};this.values=function(B,C){if(B!==e){for(var A in B){u[A]=B[A]}if(C!==true){o.set(y,y.values())}}else{return u}};this.show=function(){o.show(y)};this.hide=function(){o.hide(y)};z(v,x,w)};f=function(v,u){if(u.engine===e){u.engine="standard"}else{u.engine=u.engine.toLowerCase()}return new r.constructor.prototype.templateEngines[u.engine](v,u)};q(p,t)};b.prototype.templateEngines={};b.prototype.templateEngines.standard=function(j,g){var k=c.getByClass(g.listClass,a.getElementById(g.list))[0],i=a.getElementById(g.item),f=this,h={tryItemSourceExists:function(){if(i===null){var n=k.childNodes,m=[];for(var o=0,l=n.length;o<l;o++){if(n[o].data===e){i=n[o];break}}}},created:function(l){if(l.elm===e){f.create(l)}},added:function(l){if(l.elm.parentNode===null){f.add(l)}}};this.get=function(p,n){h.tryItemSourceExists();h.created(p);var m={};for(var o=0,l=n.length;o<l;o++){m[n[o]]=c.getByClass(n[o],p.elm)[0].innerHTML}return m};this.set=function(n,m){h.created(n);for(var l in m){if(m.hasOwnProperty(l)){var o=c.getByClass(l,n.elm,true);if(o){o.innerHTML=m[l]}}}};this.create=function(m){if(m.elm!==e){return}h.tryItemSourceExists();var l=i.cloneNode(true);l.id="";m.elm=l;f.set(m,m.values())};this.add=function(l){h.created(l);k.appendChild(l.elm)};this.remove=function(l){k.removeChild(l.elm)};this.show=function(l){h.created(l);h.added(l);k.appendChild(l.elm)};this.hide=function(l){if(l.elm!==e&&l.elm.parentNode===k){k.removeChild(l.elm)}};this.clear=function(){if(k.hasChildNodes()){while(k.childNodes.length>=1){k.removeChild(k.firstChild)}}}};c={getByClass:(function(){if(a.getElementsByClassName){return function(g,f,h){if(h){return f.getElementsByClassName(g)[0]}else{return f.getElementsByClassName(g)}}}else{return function(m,g,o){var p=[],q="*";if(g==null){g=a}var k=g.getElementsByTagName(q);var f=k.length;var n=new RegExp("(^|\\s)"+m+"(\\s|$)");for(var l=0,h=0;l<f;l++){if(n.test(k[l].className)){if(o){return k[l]}else{p[h]=k[l];h++}}}return p}}})(),addEvent:(function(g,f){if(f.addEventListener){return function(m,l,j){if((m&&!(m instanceof Array)&&!m.length&&!c.isNodeList(m)&&(m.length!==0))||m===g){m.addEventListener(l,j,false)}else{if(m&&m[0]!==e){var h=m.length;for(var k=0;k<h;k++){c.addEvent(m[k],l,j)}}}}}else{if(f.attachEvent){return function(m,l,j){if((m&&!(m instanceof Array)&&!m.length&&!c.isNodeList(m)&&(m.length!==0))||m===g){m.attachEvent("on"+l,function(){return j.call(m,g.event)})}else{if(m&&m[0]!==e){var h=m.length;for(var k=0;k<h;k++){c.addEvent(m[k],l,j)}}}}}}})(this,a),getAttribute:function(l,g){var f=(l.getAttribute&&l.getAttribute(g))||null;if(!f){var h=l.attributes;var k=h.length;for(var j=0;j<k;j++){if(g[j]!==e){if(g[j].nodeName===g){f=g[j].nodeValue}}}}return f},isNodeList:function(g){var f=Object.prototype.toString.call(g);if(typeof g==="object"&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(f)&&(g.length==0||(typeof node==="object"&&g[0].nodeType>0))){return true}return false},hasClass:function(h,g){var f=this.getAttribute(h,"class");return(f.search(g)>-1)},addClass:function(h,g){if(!this.hasClass(h,g)){var f=this.getAttribute(h,"class");f=f+" "+g+" ";f=f.replace(/\s{2,}/g," ");h.setAttribute("class",f)}},removeClass:function(h,g){if(this.hasClass(h,g)){var f=this.getAttribute(h,"class");f=f.replace(g,"");h.setAttribute("class",f)}}};d.List=b;d.ListJsHelpers=c})(window);